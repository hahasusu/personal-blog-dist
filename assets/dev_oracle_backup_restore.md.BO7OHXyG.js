import{_ as s,c as a,o as i,a4 as e}from"./chunks/framework.BE4fazHS.js";const g=JSON.parse('{"title":"oracle 数据备份及还原","description":"","frontmatter":{},"headers":[],"relativePath":"dev/oracle_backup_restore.md","filePath":"dev/oracle_backup_restore.md"}'),l={name:"dev/oracle_backup_restore.md"},t=e(`<h1 id="oracle-数据备份及还原" tabindex="-1">oracle 数据备份及还原 <a class="header-anchor" href="#oracle-数据备份及还原" aria-label="Permalink to &quot;oracle 数据备份及还原&quot;">​</a></h1><h2 id="需求" tabindex="-1">需求 <a class="header-anchor" href="#需求" aria-label="Permalink to &quot;需求&quot;">​</a></h2><p>将orcle用户onemap下的表和数据导入到onemap2000用户</p><h2 id="创建用户" tabindex="-1">创建用户 <a class="header-anchor" href="#创建用户" aria-label="Permalink to &quot;创建用户&quot;">​</a></h2><p>在sqlplus或则oracle sql developer中执行创建语句，创建onemap2000用户：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> USER</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onemap2000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IDENTIFIED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ONEMAP&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TABLESPACE ONEMAP;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GRANT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CONNECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RESOURCE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> onemap2000;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GRANT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DBA </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> onemap2000;</span></span></code></pre></div><h2 id="exp方式" tabindex="-1">exp方式 <a class="header-anchor" href="#exp方式" aria-label="Permalink to &quot;exp方式&quot;">​</a></h2><h3 id="导出" tabindex="-1">导出 <a class="header-anchor" href="#导出" aria-label="Permalink to &quot;导出&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> onemap/password@orcl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file=c:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nemap.dmp</span></span></code></pre></div><p><img src="https://mou-ali-oss.oss-cn-hangzhou.aliyuncs.com/hexo/orcle/20190218111220.png" alt=""></p><h3 id="导入" tabindex="-1">导入 <a class="header-anchor" href="#导入" aria-label="Permalink to &quot;导入&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">imp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> onemap2000/password@orcl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fromuser=onemap</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> touser=onemap2000</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file=c:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nemap.dmp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ignore=y</span></span></code></pre></div><p><img src="https://mou-ali-oss.oss-cn-hangzhou.aliyuncs.com/hexo/orcle/20190218111352.png" alt=""></p><p>*以上导入导出命令均在cmd命令中完成。</p><h2 id="expdp方式" tabindex="-1">expdp方式 <a class="header-anchor" href="#expdp方式" aria-label="Permalink to &quot;expdp方式&quot;">​</a></h2><ul><li>expdp <code>数据泵</code>是ORCALE10G提供的新的导入导出工具。</li><li>官方描述：Oracle DataPump technology enables Very High-Speed movement of data and metadata from one database to another.</li><li>主要特性</li></ul><ol><li>支持并行处理导入、导出任务</li><li>支持暂停和重启动导入、导出任务</li><li>支持通过Database Link的方式导出或导入远端数据库中的对象</li><li>支持在导入时通过Remap_schema、Remap_datafile、Remap_tablespace几个参数实现导入过程中自动修改对象属主、 数据文件或数据所在表空间。</li><li>导入/导出时提供了非常细粒度的对象控制。通过Include、Exclude两个参数，甚至可以详细制定是否包含或不包含某个对象。</li></ol><h3 id="导出-1" tabindex="-1">导出 <a class="header-anchor" href="#导出-1" aria-label="Permalink to &quot;导出&quot;">​</a></h3><p>登录sqlplus，定义dmp文件夹：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directory</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dmp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;C:\\dmp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dba_directories</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grant</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> read,write</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directory</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dmp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> onemap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>在cmd命令下执行expdp:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">expdp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> onemap/ONEMAP@orcl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directory=dmp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dumpfile=onemap.dmp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logfile=onemap.log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> schemas=onemap</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EXCLUDE=TABLE:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">IN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;ZT_WPJCFJ&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">,</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;ZT_WPJCFJ2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span></span></code></pre></div><p>eclude表示不需要导出的表，window下双引号用<code>\\</code>进行转义。</p><p>include同样的用法。</p><p><img src="https://mou-ali-oss.oss-cn-hangzhou.aliyuncs.com/hexo/orcle/20190220125257.png" alt=""></p><h3 id="导入-1" tabindex="-1">导入 <a class="header-anchor" href="#导入-1" aria-label="Permalink to &quot;导入&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">impdp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> onemap2000/ONEMAP@orcl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directory=dmp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dumpfile=onemap.dmp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remap_schema=onemap:onemap2000</span></span></code></pre></div><p>导入成功！</p><p><img src="https://mou-ali-oss.oss-cn-hangzhou.aliyuncs.com/hexo/orcle/20190220130304.png" alt=""></p><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><p>Oracle中用exp/imp命令参数详解：<a href="https://blog.csdn.net/lsyuan1989/article/details/50418665" target="_blank" rel="noreferrer">https://blog.csdn.net/lsyuan1989/article/details/50418665</a></p><p>Oracle expdp命令使用详细：<a href="https://blog.csdn.net/zhongguomao/article/details/78933333" target="_blank" rel="noreferrer">https://blog.csdn.net/zhongguomao/article/details/78933333</a></p><p>EXPDP和IMPDP数据泵进行导出导入的方法:<a href="https://www.cnblogs.com/promise-x/p/7477360.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/promise-x/p/7477360.html</a></p>`,33),h=[t];function p(n,k,r,o,d,c){return i(),a("div",null,h)}const m=s(l,[["render",p]]);export{g as __pageData,m as default};
